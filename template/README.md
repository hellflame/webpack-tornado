# {{ name }}

generated by {{ author }}

> {{ description }}

#### 1. npm安装依赖

```bash
$ cd project-name
$ npm install
```

#### 2. pip安装依赖

```bash
$ pip install -r requirements.txt
```

> 如果出现权限问题，加上sudo

#### 3. 启动开发模式

```bash
$ npm run dev # 启动vue开发模式
```

```bash
$ python run.py  # 启动tornado后端
```

#### 4. 测试访问

在浏览器中访问 [http://0.0.0.0:5000](http://0.0.0.0:5000)

至此，如果能够看到有Vue标志的页面，便说明可以进行自己项目的开发了。

### 注意

前端默认从0.0.0.0:8080端口启动，如果被占用，会尝试0.0.0.0:8081，依此类推，但对后端可见的依然是8080端口，导致无法获取前端实时数据。

后端默认从0.0.0.0:5000端口启动，可以通过CLI指定port参数，运行在其他端口，如:

```bash
$ python run.py --port=5001  # 运行在5001端口
```

由于整个开发过程中前端数据被后端代理，所以只要能访问后端服务器，就可以开始自己的开发。

## 开发应用

项目目录结构如下:

```bash
├── build             # 前端开发配置
├── config            # webpack 配置
├── project           # 项目开发目录
│   ├── model         # 后端model层
│   ├── public          # 静态文件资源目录
│   ├── service         # 后端service层
│   ├── src           # 前端开发目录
│   │   ├── components      # 前端组件
│   │   └── router        # 前端路由(如果开启Vue-Router)
│   ├── static          # 前端发布目录
│   └── templates       # HTML模版
└── test            # 前端测试目录
    ├── e2e           # 前端e2e测试
    │   ├── custom-assertions
    │   └── specs
    └── unit          # 前端unit测试
        └── specs
```

一般应用开发只需要关注 `project` 目录即可

前端开发与一般vue的开发过程一样。

```bash
src/
├── components    # Vue组件
│   └── Hello.vue
├── router      # Vue-Router路由
│   └── index.js
├── App.vue     # Vue入口
└── main.js     # 入口文件
```

后端开发使用tornado，而且加入了部分定制，让后端开发更顺手

```bash
project/
├── model       # 后端model，主要进行数据操作等
│   ├── __init__.py
│   └── eg_model.py
├── public        # 无论何时，都可以通过/public/*** 来访问该目录下静态文件
├── service       # 后端service，主要进行路由响应和权限控制等
├── static        # 包含前端打包之后的静态文件，js、css，每次打包都会清空重写
├── templates     # 模版文件目录
│   ├── error.html
│   └── index.html
├── __init__.py
├── config.example.py # 后端配置模版，一般在服务端的配置文件为该配置文件的副本
└── config.py     # 当前在用的配置文件
```

后端service:

```bash
service
├── __init__.py
├── base.py       # 基础响应基类，可分配权限控制
├── s_example.py    # 通用服务处理，文件匹配通配符 s_*.py ，会被自动导入
├── static.py     # 静态文件处理，关联 public/ 和 static/
└── templates.py    # 模版响应处理，关联 templates/ 目录
```

## 发布应用

在完成前端之后，打包前端代码:

```bash
$ npm run build
```

打包之后的文件位于 `project/static/`

部署后端代码时需要将debug.py覆盖，即 `DEBUG=False` ，此时应用仅运行在本地端口，并且使用static下的静态文件提供服务，剩下的就是 `Supervisor` + `Nginx` 的代理配置了。

